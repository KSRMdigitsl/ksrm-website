<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Salary Calculator (UK) — KSRM Digital</title>

  <!-- Same CSS bundle your PDF page uses -->
  <link rel="stylesheet" href="../../assets/css/main.css" />
  <link rel="icon" href="/assets/img/favicon.png" sizes="32x32" />

  <!-- Page-only micro tweaks (safe to delete if you prefer) -->
  <style>
    .pill .period-toggle { display:flex; gap:6px; align-items:center; }
    .period-toggle .chip { padding:6px 10px; border-radius:999px; border:1px solid var(--ui-border,#e6ebf2); background:#fff; cursor:pointer; font-weight:600; }
    .period-toggle .chip.active { background:#eef3ff; border-color:#8fa6ff; }
    .kpi-row { display:grid; grid-template-columns: repeat(3,1fr); gap:10px; }
    .kpi { background:#f6f9ff; border:1px solid #e6ebf2; border-radius:10px; padding:10px 12px; }
    .kpi small { color:#6b7280; display:block; }
    .kpi strong { font-weight:700; }
    .tile-grid { display:grid; grid-template-columns: repeat( auto-fit, minmax(240px, 1fr) ); gap:14px; }
    .tile { background:#f7f9ff; border:1px solid #e5ebf4; border-radius:12px; padding:14px; }
    .tile small { color:#6b7280; display:block; }
    .tile b { font-size:1.25rem; }
    .bars { display:grid; gap:10px; margin-top:10px; }
    .bar { display:grid; grid-template-columns: 1fr auto; gap:8px; align-items:center; }
    .bar .track { height:8px; background:#eef2f8; border-radius:999px; overflow:hidden; }
    .bar .fill { height:100%; background:#5b8cff; width:0; }
    .chips-row { display:flex; gap:8px; flex-wrap:wrap; }
    .chip-x { padding:8px 10px; border-radius:999px; border:1px solid #e4e9f2; cursor:pointer; background:#fff; }
    .ad-placeholder { border:1.5px dashed #dfe3ea; border-radius:12px; padding:18px; text-align:center; color:#6b7280; }
  </style>
</head>

<body>

  <!-- shared header -->
  <header data-include></header>

  <main class="container tool-page" style="padding-bottom:60px">

    <!-- ===== Top pill bar (matches PDF page) ===== -->
    <section class="pillbar">
      <div class="pill">
        <div class="period-toggle" id="periodToggle">
          <button class="chip active" data-per="month">Month</button>
          <button class="chip" data-per="year">Year</button>
          <button class="chip" data-per="week">Week</button>
          <button class="chip" data-per="day">Day</button>
          <span>•</span>
          <b id="pill-net">£0.00</b>
          <span style="color:#6b7280" id="pill-eff">(effective tax rate: 0%)</span>
        </div>
      </div>

      <div class="pillbar-actions">
        <button id="copyLink" class="btn-ghost">Copy link</button>
        <button id="resetPage" class="btn-ghost">Reset</button>
        <a href="/tools/" class="btn-ghost">All tools</a>
      </div>
    </section>

    <!-- ===== Title / subtitle ===== -->
    <header class="tool-header">
      <h1>Salary Calculator (UK)</h1>
      <p class="muted">
        2024–25 bands for England/Wales/NI and Scotland. Calculates income tax, National Insurance, pension & student
        loan. Use the quick presets or paste a salary; switch periods with the toggle.
      </p>
    </header>

    <section class="tool-layout">
      <!-- ===== Left sticky TOC (same structure as PDF) ===== -->
      <aside class="toc">
        <div class="toc-inner">
          <h4>On this page</h4>
          <nav>
            <a href="#inputs"      class="toc-link">Inputs</a>
            <a href="#loan"        class="toc-link">Student loan</a>
            <a href="#advanced"    class="toc-link">Advanced</a>
            <a href="#results"     class="toc-link">Results</a>
            <a href="#breakdown"   class="toc-link">Breakdown</a>
          </nav>
        </div>
      </aside>

      <!-- ===== Right content ===== -->
      <div class="content">

        <!-- ===== Inputs card (mirrors PDF “tip + kpis + fields” pattern) ===== -->
        <section id="inputs" class="card">
          <div class="tip">
            <strong>Tip</strong> — Choose a preset or type any number. Period toggle affects all outputs.
            Employee pension reduces taxable pay; employer % is shown for info.
          </div>

          <div class="chips-row" style="margin-top:10px">
            <button class="chip-x" data-preset="25000">£25k</button>
            <button class="chip-x" data-preset="35000">£35k</button>
            <button class="chip-x" data-preset="50000">£50k</button>
            <button class="chip-x" data-preset="75000">£75k</button>
            <button class="chip-x" data-preset="100000">£100k</button>
          </div>

          <div class="row" style="margin-top:12px; gap:12px">
            <div class="field">
              <label for="gross">Annual gross salary (£)</label>
              <input id="gross" class="input" type="number" inputmode="decimal" placeholder="52000" />
              <small class="muted">Pre-tax income for the tax year.</small>
            </div>

            <div class="field">
              <label>Show results per</label>
              <div class="period-toggle" id="periodToggleInline">
                <button class="chip active" data-per="month">Month</button>
                <button class="chip" data-per="year">Year</button>
                <button class="chip" data-per="week">Week</button>
                <button class="chip" data-per="day">Day</button>
              </div>
            </div>
          </div>

          <div class="row" style="margin-top:12px; gap:12px">
            <div class="field">
              <label for="penEmp">Pension (employee) %</label>
              <input id="penEmp" class="input" type="number" step="0.1" placeholder="5" />
              <small class="muted">Reduces taxable pay, thus tax and NI.</small>
            </div>

            <div class="field">
              <label for="penEr">Employer pension %</label>
              <input id="penEr" class="input" type="number" step="0.1" placeholder="3" />
              <small class="muted">Shown for info; does not change tax/NI.</small>
            </div>
          </div>

          <div class="row" style="margin-top:12px; gap:12px">
            <div class="field">
              <label for="taxYear">Tax year</label>
              <select id="taxYear" class="input">
                <option value="2024">2024–25</option>
                <option value="2023">2023–24</option>
              </select>
            </div>

            <div class="field">
              <label for="region">Region</label>
              <select id="region" class="input">
                <option value="EWNI">England / Wales / NI</option>
                <option value="SCO">Scotland</option>
              </select>
              <small class="muted">Scotland uses different income-tax bands.</small>
            </div>
          </div>
        </section>

        <!-- ===== Student loan card ===== -->
        <section id="loan" class="card">
          <h3>Student loan</h3>
          <div class="row" style="gap:12px">
            <div class="field">
              <label for="loanPlan">Plan</label>
              <select id="loanPlan" class="input">
                <option value="none">None</option>
                <option value="plan1">Plan 1</option>
                <option value="plan2">Plan 2</option>
                <option value="plan4">Plan 4 (Scotland)</option>
                <option value="plan5">Plan 5 (England)</option>
              </select>
            </div>
            <div class="field">
              <label class="checkbox">
                <input type="checkbox" id="pgLoan" />
                <span>Postgraduate loan</span>
              </label>
            </div>
          </div>
        </section>

        <!-- ===== Advanced card ===== -->
        <section id="advanced" class="card">
          <h3>Advanced</h3>
          <p class="muted">Options for detailed scenarios (keep defaults if unsure).</p>
          <div class="row" style="gap:12px">
            <div class="field">
              <label for="additionalPension">Additional voluntary pension %</label>
              <input id="additionalPension" class="input" type="number" step="0.1" placeholder="0" />
            </div>
            <div class="field">
              <label for="allowances">Other pre-tax allowances (£/yr)</label>
              <input id="allowances" class="input" type="number" step="1" placeholder="0" />
            </div>
          </div>
        </section>

        <!-- ===== Results card (tiles + bars like we mocked) ===== -->
        <section id="results" class="card">
          <h3>Results</h3>

          <div class="tile-grid">
            <div class="tile">
              <small>Gross pay</small>
              <b id="rGross">£0.00</b>
            </div>
            <div class="tile">
              <small>Take-home</small>
              <b id="rNet">£0.00</b>
            </div>
            <div class="tile">
              <small>Income tax</small>
              <b id="rTax">£0.00</b>
            </div>
            <div class="tile">
              <small>NI (employee)</small>
              <b id="rNi">£0.00</b>
            </div>
            <div class="tile">
              <small>Student loan</small>
              <b id="rLoan">£0.00</b>
            </div>
            <div class="tile">
              <small>Pension (employee)</small>
              <b id="rPen">£0.00</b>
            </div>
          </div>

          <div class="bars">
            <div class="bar">
              <div class="track"><div class="fill" id="barTax"></div></div>
              <span id="lblTax">£0</span>
            </div>
            <div class="bar">
              <div class="track"><div class="fill" id="barNi"></div></div>
              <span id="lblNi">£0</span>
            </div>
            <div class="bar">
              <div class="track"><div class="fill" id="barLoan"></div></div>
              <span id="lblLoan">£0</span>
            </div>
            <div class="bar">
              <div class="track"><div class="fill" id="barPen"></div></div>
              <span id="lblPen">£0</span>
            </div>
          </div>

          <div class="ad-placeholder" style="margin-top:16px">Ad placeholder — Tool (Middle)</div>
        </section>

        <!-- ===== Breakdown card ===== -->
        <section id="breakdown" class="card">
          <h3>Breakdown</h3>
          <div id="breakdownBody" class="muted">
            Detailed lines & bands (income tax, NI, student loan) will appear here after calculation.
          </div>
        </section>

      </div>
    </section>
  </main>

  <!-- shared footer -->
  <footer data-include></footer>

  <!-- include loader (same used on PDF page) -->
  <script src="../../assets/js/include.js"></script>

  <!-- Your existing salary logic; keep your file name/path here -->
  <script src="./tool-salary.js"></script>

  <script>
    // Lightweight glue so this layout talks nicely to your existing calculator.
    // If your tool-salary.js already wires all these IDs, this block can be removed.

    const $ = (s, r=document)=>r.querySelector(s);
    const $$ = (s, r=document)=>Array.from(r.querySelectorAll(s));

    // Keep period chips in sync (top pill and inline group)
    function syncPeriodButtons(per){
      $$("#periodToggle .chip, #periodToggleInline .chip").forEach(btn=>{
        btn.classList.toggle("active", btn.dataset.per === per);
      });
    }
    $$("#periodToggle .chip, #periodToggleInline .chip").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        const per = btn.dataset.per;
        syncPeriodButtons(per);
        document.dispatchEvent(new CustomEvent("salary:setPeriod", { detail: per }));
      });
    });

    // Presets
    $$(".chip-x[data-preset]").forEach(ch=>{
      ch.addEventListener("click", ()=>{
        $("#gross").value = ch.dataset.preset;
        document.dispatchEvent(new Event("salary:recalc"));
      });
    });

    // Copy/reset
    $("#copyLink").addEventListener("click", ()=>{
      navigator.clipboard.writeText(location.href).then(()=>alert("Link copied."));
    });
    $("#resetPage").addEventListener("click", ()=>location.href="/tools/salary-uk/");

    // Bridges to update UI from your core calculator (emit these from tool-salary.js)
    document.addEventListener("salary:update", (e)=>{
      const d = e.detail; if(!d) return;
      $("#rGross").textContent = d.grossFmt;
      $("#rNet").textContent   = d.netFmt;
      $("#rTax").textContent   = d.taxFmt;
      $("#rNi").textContent    = d.niFmt;
      $("#rLoan").textContent  = d.loanFmt;
      $("#rPen").textContent   = d.penFmt;

      $("#pill-net").textContent = d.netFmt;
      $("#pill-eff").textContent = `(effective tax rate: ${d.effectiveRate})`;

      // Bars (% of gross)
      const pct = (v)=> Math.max(0, Math.min(100, d.gross > 0 ? (v/d.gross*100) : 0));
      $("#barTax").style.width  = pct(d.tax)  + "%";
      $("#barNi").style.width   = pct(d.ni)   + "%";
      $("#barLoan").style.width = pct(d.loan) + "%";
      $("#barPen").style.width  = pct(d.pen)  + "%";

      $("#lblTax").textContent  = d.taxFmt;
      $("#lblNi").textContent   = d.niFmt;
      $("#lblLoan").textContent = d.loanFmt;
      $("#lblPen").textContent  = d.penFmt;

      // Breakdown HTML (optional)
      if (d.breakdownHtml) $("#breakdownBody").innerHTML = d.breakdownHtml;
    });

    // Initial sync
    syncPeriodButtons("month");
  </script>
</body>
</html>
